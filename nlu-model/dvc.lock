schema: '2.0'
stages:
  create-chatito-definitions:
    cmd: python3 translator.py -t "writer/chatito_template.chatito" -o "writer/chatito_model.chatito"
      -p params.yaml
    deps:
    - path: ../resources/db/db_concept_deib.json
      hash: md5
      md5: 91382d27461659739bf34b7bf956c1fd
      size: 66248
    - path: ../resources/db/db_schema_deib.json
      hash: md5
      md5: 8d07dbaa74263260caa40a4a8db31c42
      size: 44793
    - path: ../resources/db/db_view_deib.json
      hash: md5
      md5: c3f61fe8dba949d6333956be6a73bde2
      size: 16174
    - path: translator.py
      hash: md5
      md5: 5c9b9569b8cf7fef3c2d3c3a93da31e5
      size: 9860
    - path: writer/chatito_template.chatito
      hash: md5
      md5: 1d37e3f5bc420ea54cd434a7c9e2d83c
      size: 2092
    params:
      params.yaml:
        dataset.max_ngrams: 3
    outs:
    - path: writer/chatito_model.chatito
      hash: md5
      md5: c1c7eb264b34182e5b01efd65234a713
      size: 96355
  generate-phrases:
    cmd: npx chatito writer/chatito_model.chatito --format=rasa --defaultDistribution=even
      --outputPath=writer
    deps:
    - path: writer/chatito_model.chatito
      hash: md5
      md5: c1c7eb264b34182e5b01efd65234a713
      size: 96355
    outs:
    - path: writer/rasa_dataset_testing.json
      hash: md5
      md5: 2f09a2660cfc51efee33672000dc926f
      size: 213918
    - path: writer/rasa_dataset_training.json
      hash: md5
      md5: 200bf1430020f19130554db298cde9a1
      size: 868336
  convert-data-to-yaml:
    cmd:
    - rasa data convert nlu -f yaml --data=writer/rasa_dataset_training.json --out=data/chatito_nlu.yml
    - rasa data convert nlu -f yaml --data=writer/rasa_dataset_testing.json --out=data/test_chatito_nlu.yml
    deps:
    - path: writer/rasa_dataset_testing.json
      hash: md5
      md5: 2f09a2660cfc51efee33672000dc926f
      size: 213918
    - path: writer/rasa_dataset_training.json
      hash: md5
      md5: 200bf1430020f19130554db298cde9a1
      size: 868336
    outs:
    - path: data/chatito_nlu.yml
      hash: md5
      md5: 7767d9c0a4b53dcd0ec95cd90e862ae1
      size: 268994
    - path: data/test_chatito_nlu.yml
      hash: md5
      md5: aa535a6871c4310caa3a3c4d7efaef20
      size: 66041
  train:
    cmd: rasa train --fixed-model-name nlu_model --out models --data data/chatito_nlu.yml
    deps:
    - path: config.yml
      md5: 2b5e1366de3c068c134e338528382206
      size: 949
    - path: data/chatito_nlu.yml
      hash: md5
      md5: 7767d9c0a4b53dcd0ec95cd90e862ae1
      size: 268994
    - path: domain.yml
      md5: 65e4c57c53635900895b120f5ed8c944
      size: 863
    outs:
    - path: models/nlu_model.tar.gz
      hash: md5
      md5: 0c562f522f29ad8d68410bf83c7b9b0d
      size: 43176568
  test:
    cmd:
    - rasa test nlu -m models/nlu_model.tar.gz -u data/test_chatito_nlu.yml
    - touch results/DIETClassifier_confusion_matrix.png results/DIETClassifier_errors.json
      results/DIETClassifier_histogram.png results/DIETClassifier_report.json results/intent_report.json
      results/intent_errors.json
    deps:
    - path: data/test_chatito_nlu.yml
      hash: md5
      md5: aa535a6871c4310caa3a3c4d7efaef20
      size: 66041
    - path: models/nlu_model.tar.gz
      hash: md5
      md5: 0c562f522f29ad8d68410bf83c7b9b0d
      size: 43176568
    outs:
    - path: results/DIETClassifier_confusion_matrix.png
      hash: md5
      md5: 50e92e651f75f720d376df37595b18b8
      size: 182219
    - path: results/DIETClassifier_errors.json
      hash: md5
      md5: 77f752f27ff6e1ae596a946a49e87fca
      size: 136923
    - path: results/DIETClassifier_histogram.png
      hash: md5
      md5: 0250f8fef902821a27e0be1b9248dc73
      size: 48553
    - path: results/DIETClassifier_report.json
      hash: md5
      md5: 7537d9221a2e1bdaf148757f6bc4085c
      size: 8759
    - path: results/intent_confusion_matrix.png
      hash: md5
      md5: ef63c4ec434933e6be4185308329659e
      size: 85083
    - path: results/intent_errors.json
      hash: md5
      md5: 7244665cd2568c18baf2758dd05c1cdc
      size: 390
    - path: results/intent_histogram.png
      hash: md5
      md5: dd0e4c4fbee55e2bd38a6269905dd6fd
      size: 46271
    - path: results/intent_report.json
      hash: md5
      md5: e979a6e5d415b347ad25b2aaa027476a
      size: 2102
