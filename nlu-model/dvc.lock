schema: '2.0'
stages:
  create-chatito-definitions:
    cmd: python3 translator.py -t "writer/chatito_template.chatito" -o "writer/chatito_model.chatito"
      -p params.yaml
    deps:
    - path: ../resources/db/db_concept_deib.json
      hash: md5
      md5: 91382d27461659739bf34b7bf956c1fd
      size: 66248
    - path: ../resources/db/db_schema_deib.json
      hash: md5
      md5: 8d07dbaa74263260caa40a4a8db31c42
      size: 44793
    - path: ../resources/db/db_view_deib.json
      hash: md5
      md5: c3f61fe8dba949d6333956be6a73bde2
      size: 16174
    - path: translator.py
      hash: md5
      md5: 62435b3b3f1fa8f01ad880f9ea8b877a
      size: 9971
    - path: writer/chatito_template.chatito
      hash: md5
      md5: 1d37e3f5bc420ea54cd434a7c9e2d83c
      size: 2092
    params:
      params.yaml:
        dataset.max_ngrams: 3
    outs:
    - path: writer/chatito_model.chatito
      hash: md5
      md5: c1c7eb264b34182e5b01efd65234a713
      size: 96355
  generate-phrases:
    cmd: npx chatito writer/chatito_model.chatito --format=rasa --defaultDistribution=even
      --outputPath=writer
    deps:
    - path: writer/chatito_model.chatito
      hash: md5
      md5: c1c7eb264b34182e5b01efd65234a713
      size: 96355
    outs:
    - path: writer/rasa_dataset_testing.json
      hash: md5
      md5: 2f09a2660cfc51efee33672000dc926f
      size: 213918
    - path: writer/rasa_dataset_training.json
      hash: md5
      md5: 200bf1430020f19130554db298cde9a1
      size: 868336
  convert-data-to-yaml:
    cmd:
    - rasa data convert nlu -f yaml --data=writer/rasa_dataset_training.json --out=data/chatito_nlu.yml
    - rasa data convert nlu -f yaml --data=writer/rasa_dataset_testing.json --out=data/test_chatito_nlu.yml
    deps:
    - path: writer/rasa_dataset_testing.json
      hash: md5
      md5: 2f09a2660cfc51efee33672000dc926f
      size: 213918
    - path: writer/rasa_dataset_training.json
      hash: md5
      md5: 200bf1430020f19130554db298cde9a1
      size: 868336
    outs:
    - path: data/chatito_nlu.yml
      hash: md5
      md5: 7767d9c0a4b53dcd0ec95cd90e862ae1
      size: 268994
    - path: data/test_chatito_nlu.yml
      hash: md5
      md5: aa535a6871c4310caa3a3c4d7efaef20
      size: 66041
  train:
    cmd: rasa train --fixed-model-name nlu_model --out models --data data/chatito_nlu.yml
    deps:
    - path: config.yml
      md5: 2b5e1366de3c068c134e338528382206
      size: 949
    - path: data/chatito_nlu.yml
      hash: md5
      md5: 7767d9c0a4b53dcd0ec95cd90e862ae1
      size: 268994
    - path: domain.yml
      md5: 65e4c57c53635900895b120f5ed8c944
      size: 863
    outs:
    - path: models/nlu_model.tar.gz
      hash: md5
      md5: 0c562f522f29ad8d68410bf83c7b9b0d
      size: 43176568
  test:
    cmd: rasa test nlu -m models/nlu_model.tar.gz -u data/test_chatito_nlu.yml
    deps:
    - path: data/test_chatito_nlu.yml
      hash: md5
      md5: aa535a6871c4310caa3a3c4d7efaef20
      size: 66041
    - path: models/nlu_model.tar.gz
      hash: md5
      md5: 0c562f522f29ad8d68410bf83c7b9b0d
      size: 43176568
    outs:
    - path: results/DIETClassifier_confusion_matrix.png
      hash: md5
      md5: b2fa550649d0d897e509b8ba2e0b99e8
      size: 181199
    - path: results/DIETClassifier_errors.json
      hash: md5
      md5: 066348d189b48712d68d0d2b96845909
      size: 136921
    - path: results/DIETClassifier_histogram.png
      hash: md5
      md5: 6c0c11247954574c609d76059f88b0f4
      size: 48370
    - path: results/DIETClassifier_report.json
      hash: md5
      md5: 06afee57598880aaf7941a3e63a67065
      size: 8757
    - path: results/intent_confusion_matrix.png
      hash: md5
      md5: ef63c4ec434933e6be4185308329659e
      size: 85083
    - path: results/intent_errors.json
      hash: md5
      md5: 7244665cd2568c18baf2758dd05c1cdc
      size: 390
    - path: results/intent_histogram.png
      hash: md5
      md5: 7f3250799157b13a5f2b6d42e587d466
      size: 46328
    - path: results/intent_report.json
      hash: md5
      md5: 65c20424f4f5bc390eb81712876505a3
      size: 2102
